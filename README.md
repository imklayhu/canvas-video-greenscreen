# ç»¿å¹•æŠ åƒå¤„ç†å™¨

ä¸€ä¸ªåŸºäºŽ Next.js çš„å®žæ—¶ç»¿å¹•æŠ åƒå¤„ç†åº”ç”¨ï¼Œä½¿ç”¨ Web Workers å’Œ Canvas API å®žçŽ°é«˜æ€§èƒ½çš„å®žæ—¶å›¾åƒå¤„ç†ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ðŸŽ¥ **å®žæ—¶æ‘„åƒå¤´å¤„ç†** - æ”¯æŒè®¿é—®ç¬”è®°æœ¬ç”µè„‘æ‘„åƒå¤´è¿›è¡Œå®žæ—¶ç»¿å¹•æŠ åƒ
- ðŸŽ¨ **æ™ºèƒ½ç»¿å¹•æ£€æµ‹** - åŸºäºŽ HSL é¢œè‰²ç©ºé—´çš„ç²¾ç¡®ç»¿å¹•æ£€æµ‹ç®—æ³•
- âš¡ **é«˜æ€§èƒ½å¤„ç†** - ä½¿ç”¨ Web Workers å’Œ requestAnimationFrame å®žçŽ°æµç•…çš„ 60fps å¤„ç†
- ðŸ–¼ï¸ **èƒŒæ™¯åˆæˆ** - æ”¯æŒè‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡åˆæˆ
- ðŸŽ›ï¸ **å‚æ•°è°ƒèŠ‚** - å®žæ—¶è°ƒæ•´è‰²ç›¸ã€é¥±å’Œåº¦ã€äº®åº¦ç­‰å‚æ•°
- ðŸ“± **å“åº”å¼è®¾è®¡** - é€‚é…ä¸åŒå±å¹•å°ºå¯¸çš„çŽ°ä»£åŒ– UI

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æž¶**: Next.js 15 + TypeScript
- **æ ·å¼**: Tailwind CSS
- **å›¾åƒå¤„ç†**: Canvas API + Web Workers
- **æ€§èƒ½ä¼˜åŒ–**: OffscreenCanvas + requestAnimationFrame
- **ç®—æ³•**: HSL é¢œè‰²ç©ºé—´ç»¿å¹•æ£€æµ‹

## å¿«é€Ÿå¼€å§‹

### çŽ¯å¢ƒè¦æ±‚

- Node.js 18+ 
- æ”¯æŒ WebRTC çš„çŽ°ä»£æµè§ˆå™¨
- æ‘„åƒå¤´æƒé™

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹åº”ç”¨ã€‚

### æž„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
npm start
```

## ä½¿ç”¨è¯´æ˜Ž

### 1. å‡†å¤‡å·¥ä½œ

- ç¡®ä¿æœ‰ç»¿è‰²èƒŒæ™¯å¸ƒæˆ–ç»¿è‰²å¢™é¢
- å…‰çº¿å……è¶³ï¼Œé¿å…é˜´å½±
- æ‘„åƒå¤´ä¸ŽèƒŒæ™¯ä¿æŒé€‚å½“è·ç¦»
- é¿å…ç©¿ç€ç»¿è‰²è¡£ç‰©

### 2. å¯åŠ¨æ‘„åƒå¤´

ç‚¹å‡»"å¯åŠ¨æ‘„åƒå¤´"æŒ‰é’®ï¼Œå…è®¸æµè§ˆå™¨è®¿é—®æ‘„åƒå¤´æƒé™ã€‚

### 3. è°ƒæ•´å‚æ•°

ä½¿ç”¨å³ä¾§æŽ§åˆ¶é¢æ¿è°ƒæ•´ç»¿å¹•æ£€æµ‹å‚æ•°ï¼š

- **è‰²ç›¸èŒƒå›´**: è°ƒæ•´ç»¿è‰²æ£€æµ‹èŒƒå›´ï¼ˆ100-140 ä¸ºæŽ¨èå€¼ï¼‰
- **é¥±å’Œåº¦**: æŽ§åˆ¶é¢œè‰²çº¯åº¦è¦æ±‚
- **äº®åº¦**: è°ƒæ•´æ˜Žæš—åº¦è¦æ±‚
- **å®¹å·®**: æŽ§åˆ¶è¾¹ç¼˜è¿‡æ¸¡æ•ˆæžœ
- **ç¾½åŒ–**: å¹³æ»‘è¾¹ç¼˜å¤„ç†

### 4. èƒŒæ™¯è®¾ç½®

- å¯ç”¨"èƒŒæ™¯åˆæˆ"å¼€å…³
- ä¸Šä¼ è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡æˆ–é€‰æ‹©é¢„è®¾èƒŒæ™¯
- æ”¯æŒ JPGã€PNGã€GIF æ ¼å¼

### 5. é¢„è®¾é…ç½®

æä¾›ä¸‰ç§é¢„è®¾é…ç½®ï¼š

- **æ ‡å‡†ç»¿å¹•**: é€‚ç”¨äºŽæ ‡å‡†ç»¿è‰²èƒŒæ™¯å¸ƒ
- **å®½æ¾è®¾ç½®**: é€‚ç”¨äºŽå…‰çº¿è¾ƒæš—æˆ–é¢œè‰²ä¸çº¯çš„ç»¿å¹•
- **ç²¾ç¡®è®¾ç½®**: é€‚ç”¨äºŽé«˜è´¨é‡ç»¿å¹•å’Œä¸“ä¸šè®¾å¤‡

## æŠ€æœ¯å®žçŽ°

### ç»¿å¹•æ£€æµ‹ç®—æ³•

ä½¿ç”¨ HSL é¢œè‰²ç©ºé—´è¿›è¡Œç»¿å¹•æ£€æµ‹ï¼š

```javascript
// è½¬æ¢ä¸ºHSLé¢œè‰²ç©ºé—´
const hsl = rgbToHsl(r, g, b);
const [h, s, l] = hsl;

// æ£€æŸ¥æ˜¯å¦ä¸ºç»¿è‰²èƒŒæ™¯
const isGreen = (
  h >= config.hueMin && h <= config.hueMax &&
  s >= config.saturationMin && s <= config.saturationMax &&
  l >= config.lightnessMin && l <= config.lightnessMax
);
```

### æ€§èƒ½ä¼˜åŒ–

1. **Web Workers**: å°†å›¾åƒå¤„ç†é€»è¾‘ç§»åˆ°åŽå°çº¿ç¨‹
2. **requestAnimationFrame**: å®žçŽ°æµç•…çš„ 60fps æ¸²æŸ“
3. **OffscreenCanvas**: æ”¯æŒé«˜æ€§èƒ½çš„ç¦»å±æ¸²æŸ“ï¼ˆå½“å‰ç‰ˆæœ¬æš‚æ—¶ç¦ç”¨ï¼‰
4. **Transferable Objects**: ä½¿ç”¨ ArrayBuffer ä¼ è¾“å‡å°‘å†…å­˜æ‹·è´

### æ–‡ä»¶ç»“æž„

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx              # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ layout.tsx            # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ globals.css           # å…¨å±€æ ·å¼
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ GreenscreenProcessor.tsx  # æ ¸å¿ƒå¤„ç†ç»„ä»¶
â”‚   â”œâ”€â”€ ConfigPanel.tsx           # å‚æ•°é…ç½®é¢æ¿
â”‚   â””â”€â”€ BackgroundUploader.tsx    # èƒŒæ™¯ä¸Šä¼ ç»„ä»¶
â””â”€â”€ public/
    â””â”€â”€ greenscreen-worker.js     # Web Worker è„šæœ¬
```

## æµè§ˆå™¨å…¼å®¹æ€§

- Chrome 67+
- Firefox 60+
- Safari 11.1+
- Edge 79+

## æ€§èƒ½æŒ‡æ ‡

- **å¤„ç†å»¶è¿Ÿ**: < 16ms (60fps)
- **å†…å­˜ä½¿ç”¨**: ä¼˜åŒ–çš„å›¾åƒæ•°æ®ä¼ è¾“
- **CPU ä½¿ç”¨**: åŽå°çº¿ç¨‹å¤„ç†ï¼Œä¸»çº¿ç¨‹æ— é˜»å¡ž

## æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

1. **æ— æ³•è®¿é—®æ‘„åƒå¤´**
   - æ£€æŸ¥æµè§ˆå™¨æƒé™è®¾ç½®
   - ç¡®ä¿æ²¡æœ‰å…¶ä»–åº”ç”¨å ç”¨æ‘„åƒå¤´

2. **ç»¿å¹•æ£€æµ‹æ•ˆæžœä¸ä½³**
   - è°ƒæ•´è‰²ç›¸èŒƒå›´å‚æ•°
   - æ”¹å–„å…‰çº¿æ¡ä»¶
   - ç¡®ä¿èƒŒæ™¯é¢œè‰²å‡åŒ€

3. **æ€§èƒ½é—®é¢˜**
   - é™ä½Žæ‘„åƒå¤´åˆ†è¾¨çŽ‡
   - å…³é—­ä¸å¿…è¦çš„æµè§ˆå™¨æ ‡ç­¾é¡µ
   - æ£€æŸ¥è®¾å¤‡æ€§èƒ½

### è°ƒè¯•æ¨¡å¼

åœ¨æµè§ˆå™¨æŽ§åˆ¶å°ä¸­å¯ä»¥çœ‹åˆ°ï¼š
- FPS æ˜¾ç¤º
- é”™è¯¯ä¿¡æ¯
- æ€§èƒ½æŒ‡æ ‡

## è´¡çŒ®æŒ‡å—

æ¬¢è¿Žæäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºç¡€ç»¿å¹•æŠ åƒåŠŸèƒ½
- å®žæ—¶å‚æ•°è°ƒèŠ‚
- èƒŒæ™¯åˆæˆæ”¯æŒ
